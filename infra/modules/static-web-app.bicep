// Azure Static Web App module
@description('Static Web App name')\nparam name string\n\n@description('Location for the Static Web App')\nparam location string\n\n@description('GitHub repository URL')\nparam githubRepo string\n\n@description('GitHub branch for deployment')\nparam githubBranch string\n\n@description('Environment name')\nparam environmentName string\n\n// Static Web App resource\nresource staticWebApp 'Microsoft.Web/staticSites@2023-01-01' = {\n  name: name\n  location: location\n  tags: {\n    Environment: environmentName\n    Application: 'CodeQL-Compliance-Dashboard'\n    ManagedBy: 'Bicep'\n  }\n  properties: {\n    // Configure build properties\n    buildProperties: {\n      appLocation: '/'\n      apiLocation: 'api'\n      outputLocation: 'dist'\n    }\n    // Repository configuration (will be set up via GitHub Actions)\n    repositoryUrl: githubRepo != '' ? githubRepo : null\n    branch: githubBranch\n    // Custom domains can be configured later\n    customDomains: []\n    // Enable staging environments\n    stagingEnvironmentPolicy: 'Enabled'\n  }\n  sku: {\n    name: 'Standard'\n    tier: 'Standard'\n  }\n}\n\n// Configure application settings\nresource appSettings 'Microsoft.Web/staticSites/config@2023-01-01' = {\n  parent: staticWebApp\n  name: 'appsettings'\n  properties: {\n    // Environment-specific settings\n    ENVIRONMENT: environmentName\n    // API base URL will point to Functions app\n    VITE_API_BASE_URL: 'https://${name}-func.azurewebsites.net/api'\n    // Enable application insights\n    APPLICATIONINSIGHTS_CONNECTION_STRING: ''\n  }\n}\n\n// Output values for main template\noutput name string = staticWebApp.name\noutput url string = 'https://${staticWebApp.properties.defaultHostname}'\noutput apiToken string = staticWebApp.listSecrets().properties.apiKey\noutput id string = staticWebApp.id
